<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

<h1> Locations</h1>

<div class=container>
  <%= render 'locations/lat_lon_input' %>
  <div class="row">
    <div id="locTable" class="col-md-6">
      <%= render 'locations/map' %>
      <h4>Locations within <%= search_radius %> miles and sorted by the shortest distance from the point of origin:</h4>
      <h4><span class="label label-info">(<%= origin_point.latitude %>, <%= origin_point.longitude %>)</span></h4>
    </div>    
  </div>
  <div class="row">
    <div id="locTable" class="col-md-8">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Latitude/Longitude</th>
            <th style="text-align:right">Distance (miles)</th>
          </tr>
        </thead>
        <tbody>
          <% locations.each do |loc| %>
            <tr>
              <td><%= loc.id %></td>
              <td><%= loc.name %></td>
              <td><%= loc.latlon.latitude %>/<%= loc.latlon.longitude %></td>
              <td  class='distance'><%= loc.distance.round(2) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>